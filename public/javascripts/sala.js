var wh_sala =[
  {
    name: "Botellero",
    values:[
      { date: "01:00", value: "131" },
      { date: "02:00", value: "111" },
      { date: "03:00", value: "124" },
      { date: "04:00", value: "121" },
      { date: "05:00", value: "93" },
      { date: "06:00", value: "55"},
      { date: "07:00", value: "137" },
      { date: "08:00", value: "101" },
      { date: "09:00", value: "115" },
      { date: "10:00", value: "214"},
      { date: "11:00", value: "172" },
      { date: "12:00", value: "171" },
      { date: "13:00", value: "136" },
      { date: "14:00", value: "127"},
      { date: "15:00", value: "97" },
      { date: "16:00", value: "61" },
      { date: "17:00", value: "169" },
      { date: "18:00", value: "132" },
      { date: "19:00", value: "113" },
      { date: "20:00", value: "139" },
      { date: "21:00", value: "105"},
      { date: "22:00", value: "86"},
      { date: "23:00", value: "69" },
      { date: "24:00", value: "151" }
    ]
  }
];
var wh_sala_agua =[
  {
    name: "Humedad",
    values:[
      { date: "1", value: "52" },
      { date: "2", value: "53" },
      { date: "3", value: "53" },
      { date: "4", value: "53" },
      { date: "5", value: "53" },
      { date: "6", value: "48"},
      { date: "7", value: "51" },
      { date: "8", value: "49" },
      { date: "8.6", value: "45" },
      { date: "9", value: "53" },
      { date: "10", value: "54"},
      { date: "11", value: "53" },
      { date: "12", value: "47" },
      { date: "13", value: "48" },
      { date: "14", value: "45"},
      { date: "15", value: "46" },
      { date: "16", value: "50" },
      { date: "17", value: "49" },
      { date: "18", value: "51" },
      { date: "19", value: "48" },
      { date: "20", value: "50" },
      { date: "21", value: "49"},
      { date: "22", value: "54"},
      { date: "23", value: "56" },
      { date: "24", value: "56" }
    ]
  }
];
var wh_sala_iluminacion =[
  {
    name: "Iluminación",
    values:[
      { date: "1", value: "0" },
      { date: "2", value: "0" },
      { date: "3", value: "0" },
      { date: "4", value: "0" },
      { date: "5", value: "0" },
      { date: "6", value: "0"},
      { date: "7", value: "0" },
      { date: "8", value: "39" },
      { date: "9", value: "118" },
      { date: "10", value: "225"},
      { date: "11", value: "290" },
      { date: "12", value: "287" },
      { date: "13", value: "296" },
      { date: "14", value: "319"},
      { date: "15", value: "333" },
      { date: "16", value: "291" },
      { date: "17", value: "185" },
      { date: "18", value: "141" },
      { date: "19", value: "59" },
      { date: "20", value: "19" },
      { date: "21", value: "10"},
      { date: "22", value: "0"},
      { date: "23", value: "0" },
      { date: "24", value: "0" }
    ]
  }
];
var wh_sala_temperatura =[
  {
    name: "Temperatura",
    values:[
      { date: "1", value: "28" },
      { date: "2", value: "28" },
      { date: "3", value: "28" },
      { date: "4", value: "28" },
      { date: "5", value: "27" },
      { date: "6", value: "25"},
      { date: "7", value: "25" },
      { date: "8", value: "24" },
      { date: "9", value: "25" },
      { date: "10", value: "26"},
      { date: "11", value: "27" },
      { date: "12", value: "27" },
      { date: "13", value: "28" },
      { date: "14", value: "27"},
      { date: "15", value: "27" },
      { date: "16", value: "27" },
      { date: "17", value: "26" },
      { date: "18", value: "26" },
      { date: "19", value: "25" },
      { date: "20", value: "25" },
      { date: "21", value: "24"},
      { date: "22", value: "26"},
      { date: "23", value: "26" },
      { date: "24", value: "27" }
    ]
  },
  {
    name: "FGSD",
    values:[
      { date: "1", value: "0" },
      { date: "2", value: "0" },
      { date: "3", value: "0" },
      { date: "4", value: "0" },
      { date: "5", value: "0" },
      { date: "6", value: "26"},
      { date: "7", value: "0" },
      { date: "8", value: "25" },
      { date: "9", value: "0" },
      { date: "10", value: "27"},
      { date: "11", value: "28" },
      { date: "12", value: "0" },
      { date: "13", value: "0" },
      { date: "14", value: "0"},
      { date: "15", value: "0" },
      { date: "16", value: "0" },
      { date: "17", value: "27" },
      { date: "18", value: "0" },
      { date: "19", value: "0" },
      { date: "20", value: "0" },
      { date: "21", value: "0"},
      { date: "22", value: "0"},
      { date: "23", value: "0" },
      { date: "24", value: "0" }
    ]
  }
];
var wh_sala_fgsd =[
  {
    name: "FGSD-002",
    values:[
      { date: "1", value: "0" },
      { date: "2", value: "0" },
      { date: "3", value: "0" },
      { date: "4", value: "0" },
      { date: "5", value: "0" },
      { date: "6", value: "26"},
      { date: "7", value: "0" },
      { date: "8", value: "25" },
      { date: "9", value: "0" },
      { date: "10", value: "28"},
      { date: "11", value: "0" },
      { date: "12", value: "0" },
      { date: "13", value: "0" },
      { date: "14", value: "0"},
      { date: "15", value: "0" },
      { date: "16", value: "0" },
      { date: "17", value: "27" },
      { date: "18", value: "0" },
      { date: "19", value: "0" },
      { date: "20", value: "0" },
      { date: "21", value: "0"},
      { date: "22", value: "0"},
      { date: "23", value: "0" },
      { date: "24", value: "0" }
    ]
  }
];

var signal_sala =[
  {
    name: "6-in-1 Deteccion",
    values: [
      { date: "1", value: "0" },
      { date: "2", value: "0" },
      { date: "3", value: "0" },
      { date: "4", value: "0" },
      { date: "5", value: "6" },
      { date: "6", value: "11"},
      { date: "7", value: "6" },
      { date: "8", value: "4" },
      { date: "9", value: "0" },
      { date: "10", value: "0"},
      { date: "11", value: "0" },
      { date: "12", value: "0" },
      { date: "13", value: "0" },
      { date: "14", value: "4"},
      { date: "15", value: "0" },
      { date: "16", value: "1" },
      { date: "17", value: "0" },
      { date: "18", value: "1" },
      { date: "19", value: "1" },
      { date: "20", value: "0" },
      { date: "21", value: "4"},
      { date: "22", value: "1"},
      { date: "23", value: "0" },
      { date: "24", value: "0" }
    ]
  },
  {
    name: "Horno",
    values: [
      { date: "1", value: "0" },
      { date: "2", value: "0" },
      { date: "3", value: "0" },
      { date: "4", value: "0" },
      { date: "5", value: "7" },
      { date: "6", value: "5"},
      { date: "7", value: "0" },
      { date: "8", value: "0" },
      { date: "9", value: "0" },
      { date: "10", value: "5"},
      { date: "11", value: "1" },
      { date: "12", value: "22" },
      { date: "13", value: "6" },
      { date: "14", value: "0"},
      { date: "15", value: "0" },
      { date: "16", value: "0" },
      { date: "17", value: "0" },
      { date: "18", value: "0" },
      { date: "19", value: "0" },
      { date: "20", value: "0" },
      { date: "21", value: "0"},
      { date: "22", value: "0"},
      { date: "23", value: "0" },
      { date: "24", value: "0" }
    ]
  }

];
var width = 1000;
var height = 450;
var margin = 90;
var mar2 = 80;
var duration = 250;

var lineOpacity = "0.25";
var lineOpacityHover = "0.85";
var otherLinesOpacityHover = "0.1";
var lineStroke = "1.5px";
var lineStrokeHover = "2.5px";

var circleOpacity = '0.85';
var circleOpacityOnLineHover = "0.25"
var circleRadius = 3;
var circleRadiusHover = 6;
var axistransform1=width-margin;
var axistransform2=axistransform1+40;
var color = d3.scaleOrdinal(d3.schemeCategory10);


/*
--------------------------------------------------------------------------------
                                  parseDate
--------------------------------------------------------------------------------
 */
var parseDate1 = d3.timeParse("%d")

var parseDate = d3.timeParse("%H");

wh_sala.forEach(function(d) {
  d.values.forEach(function(d) {
    d.date = parseDate(d.date);
  });
});
wh_sala_agua.forEach(function(d) {
  d.values.forEach(function(d) {
    d.date = parseDate(d.date);
  });
});
wh_sala_iluminacion.forEach(function(d) {
  d.values.forEach(function(d) {
    d.date = parseDate(d.date);
  });
});
wh_sala_temperatura.forEach(function(d) {
  d.values.forEach(function(d) {
    d.date = parseDate(d.date);
  });
});
signal_sala.forEach(function(d) {
  d.values.forEach(function(d) {
    d.date = parseDate(d.date);
    d.value = +d.value;
  });
});
/*
--------------------------------------------------------------------------------
                                  SCALES
--------------------------------------------------------------------------------
*/
var xScale = d3.scaleTime()
  .domain(d3.extent(wh_sala_agua[0].values, d => d.date))
  .range([0, width-margin]);
var yScale_sala = d3.scaleLinear()
    .domain([0, 225])
    .range([height-margin, 0]);
var nyScale_sala_agua = d3.scaleLinear()
    .domain([0,100])
    .range([height-margin, 0]);
var nyScale_sala_it = d3.scaleLinear()
    .domain([0,22])
    .range([height-margin, 0]);
var nyScale_sala_iluminacion = d3.scaleLinear()
    .domain([0,350])
    .range([height-margin, 0]);
var nyScale_sala_temperatura = d3.scaleLinear()
    .domain([0,30])
    .range([height-margin, 0]);

/*
--------------------------------------------------------------------------------
                                  CHARTS
--------------------------------------------------------------------------------
*/
var chart_sala_agua = d3.select("#chart4").append("svg")
    .attr("width", (width+margin)+"px")
    .attr("height", (height+margin)+"px")
    .append('g')
    .attr("transform", `translate(${mar2}, ${mar2})`);
var chart_sala_iluminacion =  d3.select("#chart5").append("svg")
    .attr("width", (width+margin)+"px")
    .attr("height", (height+margin)+"px")
    .append('g')
    .attr("transform", `translate(${mar2}, ${mar2})`);
var chart_sala_temperatura =  d3.select("#chart6").append("svg")
    .attr("width", (width+margin)+"px")
    .attr("height", (height+margin)+"px")
    .append('g')
    .attr("transform", `translate(${mar2}, ${mar2})`);

var line7 = d3.line()
    .x(d => xScale(d.date))
    .y(d => yScale_sala(d.value))
var line8 =  d3.line()
    .x(d=>xScale(d.date))
    .y(d=> nyScale_sala_it(d.value))
var line9 =  d3.line()
    .x(d=>xScale(d.date))
    .y(d=> nyScale_sala_agua(d.value))
var line10 =  d3.line()
    .x(d=>xScale(d.date))
    .y(d=> nyScale_sala_iluminacion(d.value))
var line11 =  d3.line()
    .x(d=>xScale(d.date))
    .y(d=> nyScale_sala_temperatura(d.value))
let lines4= chart_sala_agua.append('g')
  .attr('class', 'lines');
let lines5 = chart_sala_iluminacion.append('g')
  .attr('class', 'lines');
let lines6 = chart_sala_temperatura.append('g')
  .attr('class', 'lines');

/*
--------------------------------------------------------------------------------
                              GROUP2 SELECT
--------------------------------------------------------------------------------
*/

  /*AGUA*/
lines4.selectAll('.line-group6')
    .data(signal_sala).enter()
    .append('g')
    .attr('class', 'line-group6')
    .on("mouseover", function(d, i) {
        chart_sala_agua.append("text")
          .attr("class", "title-text")
          .style("fill", color(i))
          .text(d.name)
          .attr("text-anchor", "middle")
          .attr("x", (width-margin)/2)
          .attr("y", 5);
    })
    .on("mouseout", function(d) {
        chart_sala_agua.select(".title-text").remove();
    })
    .append('path')
    .attr("width","px")
    .attr('class', 'line')
    .attr('d', d => line8(d.values))
    .style('stroke', (d, i) => color(i))
    .style('opacity', lineOpacity)
    .style('fill',(d, i) => color(i));

  /*Iluminación*/
lines5.selectAll('.line-group6')
    .data(signal_sala).enter()
    .append('g')
    .attr('class', 'line-group6')
    .on("mouseover", function(d, i) {
        chart_sala_iluminacion.append("text")
          .attr("class", "title-text")
          .style("fill", color(i))
          .text(d.name)
          .attr("text-anchor", "middle")
          .attr("x", (width-margin)/2)
          .attr("y", 5);
    })
    .on("mouseout", function(d) {
        chart_sala_iluminacion.select(".title-text").remove();
    })
    .append('path')
    .attr("width","px")
    .attr('class', 'line')
    .attr('d', d => line8(d.values))
    .style('stroke', (d, i) => color(i))
    .style('opacity', lineOpacity)
    .style('fill',(d, i) => color(i));
    lines6.selectAll('.line-group6')
    .data(signal_sala).enter()
    .append('g')
    .attr('class', 'line-group6')
    .on("mouseover", function(d, i) {
        chart_sala_temperatura.append("text")
          .attr("class", "title-text")
          .style("fill", color(i))
          .text(d.name)
          .attr("text-anchor", "middle")
          .attr("x", (width-margin)/2)
          .attr("y", 5);
    })
    .on("mouseout", function(d) {
        chart_sala_temperatura.select(".title-text").remove();
    })
    .append('path')
    .attr("width","px")
    .attr('class', 'line')
    .attr('d', d => line8(d.values))
    .style('stroke', (d, i) => color(i))
    .style('opacity', lineOpacity)
    .style('fill',(d, i) => color(i));
/*
--------------------------------------------------------------------------------
                                GROUP3 SELECT
--------------------------------------------------------------------------------

/*AGUA*/
lines4.selectAll('.line-group10')
    .data(wh_sala_agua).enter()
    .append('g')
    .attr('class', 'line-group10')
    .on("mouseover", function(d, i) {
        chart_sala_agua.append("text")
          .attr("class", "title-text")
          .style("fill", color(i))
          .text(d.name)
          .attr("text-anchor", "middle")
          .attr("x", (width-margin)/2)
          .attr("y", 5);
    })
    .on("mouseout", function(d) {
        chart_sala_agua.select(".title-text").remove();
    })
    .append('path')
    .attr('class', 'line')
    .attr('d', d => line9(d.values))
    .style('stroke', (d, i) => color(i+2))
    .style('opacity', lineOpacity)
    .on("mouseover", function(d) {
        d3.selectAll('.line')
  					.style('opacity', otherLinesOpacityHover);
        d3.selectAll('.circle2')
  					.style('opacity', circleOpacityOnLineHover);
        d3.select(this)
          .style('opacity', lineOpacityHover)
          .style("stroke-width", lineStrokeHover)
          .style("cursor", "pointer");
    })
    .on("mouseout", function(d) {
        d3.selectAll(".line")
  					.style('opacity', lineOpacity);
        d3.selectAll('.circle1')
  					.style('opacity', circleOpacity);
        d3.select(this)
          .style("stroke-width", lineStroke)
          .style("cursor", "none");
    });

/*Iluminación*/
lines5.selectAll('.line-group11')
  .data(wh_sala_iluminacion).enter()
  .append('g')
  .attr('class', 'line-group11')
  .on("mouseover", function(d, i) {
      chart_sala_iluminacion.append("text")
        .attr("class", "title-text")
        .style("fill", color(i+3))
        .text(d.name)
        .attr("text-anchor", "middle")
        .attr("x", (width-margin)/2)
        .attr("y", 5);
  })
  .on("mouseout", function(d) {
      chart_sala_iluminacion.select(".title-text").remove();
  })
  .append('path')
  .attr('class', 'line')
  .attr('d', d => line10(d.values))
  .style('stroke', (d, i) => color(i+3))
  .style('opacity', lineOpacity)
  .on("mouseover", function(d) {
      d3.selectAll('.line')
					.style('opacity', otherLinesOpacityHover);
      d3.selectAll('.circle2')
					.style('opacity', circleOpacityOnLineHover);
      d3.select(this)
        .style('opacity', lineOpacityHover)
        .style("stroke-width", lineStrokeHover)
        .style("cursor", "pointer");
    })
  .on("mouseout", function(d) {
      d3.selectAll(".line")
					.style('opacity', lineOpacity);
      d3.selectAll('.circle1')
					.style('opacity', circleOpacity);
      d3.select(this)
        .style("stroke-width", lineStroke)
        .style("cursor", "none");
    });

/*TEMPERATURA*/
lines6.selectAll('.line-group11')
    .data(wh_sala_temperatura).enter()
    .append('g')
    .attr('class', 'line-group11')
    .on("mouseover", function(d, i) {

        chart_sala_temperatura.append("text")
          .attr("class", "title-text")
          .style("fill", color(i+4))
          .text(d.name)
          .attr("text-anchor", "middle")
          .attr("x", (width-margin)/2)
          .attr("y", 5);
    })
    .on("mouseout", function(d) {

        chart_sala_temperatura.select(".title-text").remove();
    })
    .append('path')
    .attr('class', 'line')
    .attr('d', d => line11(d.values))
    .style('stroke', (d, i) => color(i+4))
    .style('opacity', lineOpacity)
    .on("mouseover", function(d) {
        d3.selectAll('.line')
  					.style('opacity', otherLinesOpacityHover);
        d3.selectAll('.circle2')
  					.style('opacity', circleOpacityOnLineHover);
        d3.select(this)
          .style('opacity', lineOpacityHover)
          .style("stroke-width", lineStrokeHover)
          .style("cursor", "pointer");
      })
    .on("mouseout", function(d) {
        d3.selectAll(".line")
  					.style('opacity', lineOpacity);
        d3.selectAll('.circle1')
  					.style('opacity', circleOpacity);
        d3.select(this)
          .style("stroke-width", lineStroke)
          .style("cursor", "none");
      });
/*
--------------------------------------------------------------------------------
                              GROUP1 SELECT
--------------------------------------------------------------------------------
*/

  /*AGUA*/
lines4.selectAll('.line-group8')
    .data(wh_sala).enter()
    .append('g')
    .attr('class', 'line-group8')
    .on("mouseover", function(d, i) {
        chart_sala_agua.append("text")
          .attr("class", "title-text")
          .style("fill", color(i))
          .text(d.name)
          .attr("text-anchor", "middle")
          .attr("x", (width-margin)/2)
          .attr("y", 5);
    })
    .on("mouseout", function(d) {
        chart_sala_agua.select(".title-text").remove();
    })
    .append('path')
    .attr('class', 'line')
    .attr('d', d => line7(d.values))
    .style('stroke', (d, i) => color(i))
    .style('opacity', lineOpacity)
    .on("mouseover", function(d) {
        d3.selectAll('.line')
            .style('opacity', otherLinesOpacityHover);
        d3.selectAll('.circle2')
            .style('opacity', circleOpacityOnLineHover);
        d3.select(this)
          .style('opacity', lineOpacityHover)
          .style("stroke-width", lineStrokeHover)
          .style("cursor", "pointer");
      })
    .on("mouseout", function(d) {
        d3.selectAll(".line")
            .style('opacity', lineOpacity);
        d3.selectAll('.circle1')
            .style('opacity', circleOpacity);
        d3.select(this)
          .style("stroke-width", lineStroke)
          .style("cursor", "none");
      });
  /*ILUMINACION*/
lines5.selectAll('.line-group12')
    .data(wh_sala).enter()
    .append('g')
    .attr('class', 'line-group12')
    .on("mouseover", function(d, i) {
        chart_sala_iluminacion.append("text")
          .attr("class", "title-text")
          .style("fill", color(i))
          .text(d.name)
          .attr("text-anchor", "middle")
          .attr("x", (width-margin)/2)
          .attr("y", 5);
    })
    .on("mouseout", function(d) {
        chart_sala_iluminacion.select(".title-text").remove();
    })
    .append('path')
    .attr('class', 'line')
    .attr('d', d => line7(d.values))
    .style('stroke', (d, i) => color(i))
    .style('opacity', lineOpacity)
    .on("mouseover", function(d) {
        d3.selectAll('.line')
            .style('opacity', otherLinesOpacityHover);
        d3.selectAll('.circle2')
            .style('opacity', circleOpacityOnLineHover);
        d3.select(this)
          .style('opacity', lineOpacityHover)
          .style("stroke-width", lineStrokeHover)
          .style("cursor", "pointer");
      })
    .on("mouseout", function(d) {
        d3.selectAll(".line")
            .style('opacity', lineOpacity);
        d3.selectAll('.circle1')
            .style('opacity', circleOpacity);
        d3.select(this)
          .style("stroke-width", lineStroke)
          .style("cursor", "none");
      });

/*TEMPERATURA*/
lines6.selectAll('.line-group12')
    .data(wh_sala).enter()
    .append('g')
    .attr('class', 'line-group12')
    .on("mouseover", function(d, i) {
        chart_sala_temperatura.append("text")
          .attr("class", "title-text")
          .style("fill", color(i))
          .text(d.name)
          .attr("text-anchor", "middle")
          .attr("x", (width-margin)/2)
          .attr("y", 5);
    })
    .on("mouseout", function(d) {
        chart_sala_temperatura.select(".title-text").remove();
    })
    .append('path')
    .attr('class', 'line')
    .attr('d', d => line7(d.values))
    .style('stroke', (d, i) => color(i))
    .style('opacity', lineOpacity)
    .on("mouseover", function(d) {
        d3.selectAll('.line')
            .style('opacity', otherLinesOpacityHover);
        d3.selectAll('.circle2')
            .style('opacity', circleOpacityOnLineHover);
        d3.select(this)
          .style('opacity', lineOpacityHover)
          .style("stroke-width", lineStrokeHover)
          .style("cursor", "pointer");
      })
    .on("mouseout", function(d) {
        d3.selectAll(".line")
            .style('opacity', lineOpacity);
        d3.selectAll('.circle1')
            .style('opacity', circleOpacity);
        d3.select(this)
          .style("stroke-width", lineStroke)
          .style("cursor", "none");
      });
/*
--------------------------------------------------------------------------------
                                CIRCLES
--------------------------------------------------------------------------------
*/

/*AGUA*/
lines4.selectAll("circle-group")
    .data(wh_sala).enter()
    .append("g")
    .style("fill", (d, i) => color(i))
    .selectAll("circle1")
    .data(d => d.values).enter()
    .append("g")
    .attr("class", "circle1")
    .on("mouseover", function(d) {
        d3.select(this)
          .style("cursor", "pointer")
          .append("text")
          .attr("class", "text")
          .text(`${d.value}`)
          .attr("x", d => xScale(d.date) + 5)
          .attr("y", d => yScale_sala(d.value) - 10);
      })
      .on("mouseout", function(d) {
        d3.select(this)
          .style("cursor", "none")
          .transition()
          .duration(duration)
          .selectAll(".text").remove();
        })
        .append("circle")
        .attr("cx", d => xScale(d.date))
        .attr("cy", d => yScale_sala(d.value))
        .attr("r", circleRadius)
        .style('opacity', circleOpacity)
        .on("mouseover", function(d) {
            d3.select(this)
              .transition()
              .duration(duration)
              .attr("r", circleRadiusHover);
        })
        .on("mouseout", function(d) {
            d3.select(this)
              .transition()
              .duration(duration)
              .attr("r", circleRadius);
        });

  lines4.selectAll("circle-group")
    .data(wh_sala_agua).enter()
    .append("g")
    .style("fill", (d, i) => color(i+2))
    .selectAll("circle1")
    .data(d => d.values).enter()
    .append("g")
    .attr("class", "circle1")
    .on("mouseover", function(d) {
        d3.select(this)
          .style("cursor", "pointer")
          .append("text")
          .attr("class", "text")
          .text(`${d.value}`)
          .attr("x", d => xScale(d.date) + 5)
          .attr("y", d => nyScale_sala_agua(d.value) - 10);
    })
    .on("mouseout", function(d) {
        d3.select(this)
          .style("cursor", "none")
          .transition()
          .duration(duration)
          .selectAll(".text").remove();
      })
        .append("circle")
        .attr("cx", d => xScale(d.date))
        .attr("cy", d => nyScale_sala_agua(d.value))
        .attr("r", circleRadius)
        .style('opacity', circleOpacity)
        .on("mouseover", function(d) {
            d3.select(this)
              .transition()
              .duration(duration)
              .attr("r", circleRadiusHover);
        })
        .on("mouseout", function(d) {
            d3.select(this)
              .transition()
              .duration(duration)
              .attr("r", circleRadius);
        });

    /*ILUMINACION*/
    lines5.selectAll("circle-group")
      .data(wh_sala).enter()
      .append("g")
      .style("fill", (d, i) => color(i))
      .selectAll("circle1")
      .data(d => d.values).enter()
      .append("g")
      .attr("class", "circle1")
      .on("mouseover", function(d) {
          d3.select(this)
            .style("cursor", "pointer")
            .append("text")
            .attr("class", "text")
            .text(`${d.value}`)
            .attr("x", d => xScale(d.date) + 5)
            .attr("y", d => yScale_sala(d.value) - 10);
        })
        .on("mouseout", function(d) {
          d3.select(this)
            .style("cursor", "none")
            .transition()
            .duration(duration)
            .selectAll(".text").remove();
          })
          .append("circle")
          .attr("cx", d => xScale(d.date))
          .attr("cy", d => yScale_sala(d.value))
          .attr("r", circleRadius)
          .style('opacity', circleOpacity)
          .on("mouseover", function(d) {
              d3.select(this)
                .transition()
                .duration(duration)
                .attr("r", circleRadiusHover);
          })
          .on("mouseout", function(d) {
              d3.select(this)
                .transition()
                .duration(duration)
                .attr("r", circleRadius);
          });

    lines5.selectAll("circle-group")
      .data(wh_sala_iluminacion).enter()
      .append("g")
      .style("fill", (d, i) => color(i+3))
      .selectAll("circle1")
      .data(d => d.values).enter()
      .append("g")
      .attr("class", "circle1")
      .on("mouseover", function(d) {
          d3.select(this)
            .style("cursor", "pointer")
            .append("text")
            .attr("class", "text")
            .text(`${d.value}`)
            .attr("x", d => xScale(d.date) + 5)
            .attr("y", d => nyScale_sala_iluminacion(d.value) - 10);
      })
      .on("mouseout", function(d) {
          d3.select(this)
            .style("cursor", "none")
            .transition()
            .duration(duration)
            .selectAll(".text").remove();
        })
          .append("circle")
          .attr("cx", d => xScale(d.date))
          .attr("cy", d => nyScale_sala_iluminacion(d.value))
          .attr("r", circleRadius)
          .style('opacity', circleOpacity)
          .on("mouseover", function(d) {
              d3.select(this)
                .transition()
                .duration(duration)
                .attr("r", circleRadiusHover);
          })
          .on("mouseout", function(d) {
              d3.select(this)
                .transition()
                .duration(duration)
                .attr("r", circleRadius);
          });

/*TEMPERATURA*/
   lines6.selectAll("circle-group")
      .data(wh_sala).enter()
      .append("g")
      .style("fill", (d, i) => color(i))
      .selectAll("circle1")
      .data(d => d.values).enter()
      .append("g")
      .attr("class", "circle1")
      .on("mouseover", function(d) {
          d3.select(this)
            .style("cursor", "pointer")
            .append("text")
            .attr("class", "text")
            .text(`${d.value}`)
            .attr("x", d => xScale(d.date) + 5)
            .attr("y", d => yScale_sala(d.value) - 10);
        })
        .on("mouseout", function(d) {
          d3.select(this)
            .style("cursor", "none")
            .transition()
            .duration(duration)
            .selectAll(".text").remove();
          })
          .append("circle")
          .attr("cx", d => xScale(d.date))
          .attr("cy", d => yScale_sala(d.value))
          .attr("r", circleRadius)
          .style('opacity', circleOpacity)
          .on("mouseover", function(d) {
              d3.select(this)
                .transition()
                .duration(duration)
                .attr("r", circleRadiusHover);
          })
          .on("mouseout", function(d) {
              d3.select(this)
                .transition()
                .duration(duration)
                .attr("r", circleRadius);
          });

    lines6.selectAll("circle-group")
      .data(wh_sala_temperatura).enter()
      .append("g")
      .style("fill", (d, i) => color(i+4))
      .selectAll("circle1")
      .data(d => d.values).enter()
      .append("g")
      .attr("class", "circle1")
      .on("mouseover", function(d) {
          d3.select(this)
            .style("cursor", "pointer")
            .append("text")
            .attr("class", "text")
            .text(`${d.value}`)
            .attr("x", d => xScale(d.date) + 5)
            .attr("y", d => nyScale_sala_temperatura(d.value) - 10);
      })
      .on("mouseout", function(d) {
          d3.select(this)
            .style("cursor", "none")
            .transition()
            .duration(duration)
            .selectAll(".text").remove();
        })
          .append("circle")
          .attr("cx", d => xScale(d.date))
          .attr("cy", d => nyScale_sala_temperatura(d.value))
          .attr("r", circleRadius)
          .style('opacity', circleOpacity)
          .on("mouseover", function(d) {
              d3.select(this)
                .transition()
                .duration(duration)
                .attr("r", circleRadiusHover);
          })
          .on("mouseout", function(d) {
              d3.select(this)
                .transition()
                .duration(duration)
                .attr("r", circleRadius);
          });



var xAxis = d3.axisBottom(xScale).ticks(24);
var yAxis_sala = d3.axisLeft(yScale_sala).ticks(25);
var nyAxis_sala_it = d3.axisRight(nyScale_sala_it).ticks(22);
var nyAxis_sala_agua = d3.axisRight(nyScale_sala_agua).ticks(10);
var nyAxis_sala_iluminacion=  d3.axisRight(nyScale_sala_iluminacion).ticks(10);
var nyAxis_sala_temperatura=  d3.axisRight(nyScale_sala_temperatura).ticks(10);


/*
--------------------------------------------------------------------------------
                                AXIS
--------------------------------------------------------------------------------
*/

/*AGUA*/
chart_sala_agua.append("g")
    .attr("class", "2x axis")
    .attr("transform", `translate(0, ${height-margin})`)
    .call(xAxis);
chart_sala_agua.append("g")
    .attr("class", "y axis")
    .call(yAxis_sala)
    .append('text')
    .attr("y", 15)
    .attr("x",20)
    .attr("fill", "#000")
    .text("Wh")
    .attr("transform","translate(-15,-20)");
chart_sala_agua.append("g")
    .attr("class", "y axis")
    .attr("transform","translate("+axistransform1+",0)")
    .call(nyAxis_sala_it)
    .append('text')
    .attr("y", 15)
    .attr("fill", "#000")
    .text("Mediciones")
    .attr("transform","translate(-15,-25)");
chart_sala_agua.append("g")
    .style("fill", (d, i) => color(i+2))
    .attr("class", "y axis")
    .attr("transform","translate("+axistransform2+",0)")
    .call(nyAxis_sala_agua)
    .append('text')
    .attr("y", 15)
    .text("%")
    .attr("transform","translate(0,-25)");

/*ILUMINACION*/
chart_sala_iluminacion.append("g")
    .attr("class", "2x axis")
    .attr("transform", `translate(0, ${height-margin})`)
    .call(xAxis);
chart_sala_iluminacion.append("g")
    .attr("class", "y axis")
    .call(yAxis_sala)
    .append('text')
    .attr("y", 15)
    .attr("x",20)
    .attr("fill", "#000")
    .text("Wh")
    .attr("transform","translate(-15,-20)");
chart_sala_iluminacion.append("g")
    .attr("class", "y axis")
    .attr("transform","translate("+axistransform1+",0)")
    .call(nyAxis_sala_it)
    .append('text')
    .attr("y", 15)
    .attr("fill", "#000")
    .text("Mediciones")
    .attr("transform","translate(-15,-25)");
chart_sala_iluminacion.append("g")
    .style("fill", (d, i) => color(i+3))
    .attr("class", "y axis")
    .attr("transform","translate("+axistransform2+",0)")
    .call(nyAxis_sala_iluminacion)
    .append('text')
    .attr("y", 15)
    .text("lx")
    .attr("transform","translate(0,-25)");



/*TEMPERATURA*/

chart_sala_temperatura.append("g")
    .attr("class", "2x axis")
    .attr("transform", `translate(0, ${height-margin})`)
    .call(xAxis);
chart_sala_temperatura.append("g")
    .attr("class", "y axis")
    .call(yAxis_sala)
    .append('text')
    .attr("y", 15)
    .attr("x",20)
    .attr("fill", "#000")
    .text("Wh")
    .attr("transform","translate(0,-25)")
chart_sala_temperatura.append("g")
    .attr("class", "y axis")
    .attr("transform","translate("+axistransform1+",0)")
    .call(nyAxis_sala_it)
    .append('text')
    .attr("y", 15)
    .attr("fill", "#000")
    .text("Mediciones")
    .attr("transform","translate(-15,-25)")
chart_sala_temperatura.append("g")
    .style("fill", (d, i) => color(i+4))
    .attr("class", "y axis")
    .attr("transform","translate("+axistransform2+",0)")
    .call(nyAxis_sala_temperatura)
    .append('text')
    .attr("y", 15)
    .text("ºC")
    .attr("transform","translate(0,-25)");

  var divToolTip = d3.select("body").append("div")
              .attr("class", "tooltip")
              .style("opacity", 1e-6);

  function mouseover() {
      divToolTip.transition()
          .duration(700)
          .style("opacity", 1);
  }
  function mouseout() {
      divToolTip.transition()
          .duration(500)
          .style("opacity", 1e-6);
  }
